<span class="favorite">
  <% if book.favorite?(current_user) %>
    <%= form_for(book.favorites.find_by(user_id: current_user.id), method: :delete) do |f| %>
      <%= button_tag(class: "btn btn-default btn-xs") do %>
        <%= content_tag :span, "#", class: "glyphicon glyphicon-heart" %>
      <% end %>
    <% end %>
  <% else %>
    <%= form_for(book.favorites.build) do |f| %>
      <div><%= hidden_field_tag :book_id, book.id%></div>
      <%= button_tag(class: "btn btn-dafault btn-xs") do %>
        <%= content_tag :span, "#", class: "glyphicon glyphicon-heart-empty" %>
      <% end %>
  <% end %>
</span>